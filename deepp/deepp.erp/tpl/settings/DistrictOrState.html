<div class="bg-light lter b-b wrapper-md">
    <h1 class="m-n font-thin h3">DistrictOrState</h1>
</div>

<div class="wrapper-md" ng-controller="SettingsDistrictOrStateCtrl">
    <!-- toaster directive -->
    <toaster-container toaster-options="{'deeppition-class': 'toast-top-right', 'close-button':true}"></toaster-container>
    <!-- / toaster directive -->
    <progressbar class="progress-striped active" value="100" type="info" ng-show="isLoading">Loading...  </progressbar>
    <div class="panel panel-default" ng-hide="isLoading">
        
        <div class="row wrapper">
            <div class="col-sm-3 m-b-xs">
                <button class="btn btn-sm btn-info" data-ng-click="isNew = true;">+ ADD NEW</button>
            </div>
            <div class="col-sm-3">
            </div>
            <div class="col-sm-6">
                <div class="input-group">
                    <input type="text" class="input-sm form-control" ng-change="search()" ng-model="query" placeholder=" search">
                    <span class="input-group-btn">
                        <button class="btn btn-sm btn-default" type="button">Go!</button>
                    </span>
                </div>
            </div>
        </div>
        
        
        <div class="row wrapper">
            <div class="col-sm-3">
                <span class="Name">Name&nbsp;<a ng-click="sort_by('Name')"><i class="fa fa-sort"></i></a> </span>
            </div>
            <div class="col-sm-3">
                <span class="Description">Description&nbsp; <a ng-click="sort_by('Description')"><i class="fa fa-sort"></i></a> </span>
            </div>
            <div class="col-sm-2">
                <span class="CountryId">Country &nbsp;<a ng-click="sort_by('CountryId')"><i class="fa fa-sort"></i></a></span>
            </div>
            <div class="col-sm-2">
                <span class="IsActive">Status &nbsp;<a ng-click="sort_by('IsActive')"><i class="fa fa-sort"></i></a></span>
            </div>
            <div class="col-sm-2">

            </div>
        </div>
        <div class="row wrapper" ng-show="isNew">
            <form role="form" class="form-horizontal form-validation" name="DistrictOrStateForm" ng-submit="Add(DistrictOrState)">
                <div class="col-sm-3">
                    <input class="form-control" data-ng-model="DistrictOrState.Name" required placeholder="Name" type="text">
                </div>
                <div class="col-sm-3">
                    <input class="form-control" type="text" data-ng-model="DistrictOrState.Description" placeholder="Description"/>
                </div>
                <div class="col-sm-2">
                    <!--<select data-ng-model="selected" required class="form-control m-b" ng-options="c.Name for c in  countries"><option value="">-- choose --</option></select>-->
                    <select ng-change="DistrictOrState.CountryId = selected.Id" ng-model="selected" required class="form-control m-b" ng-options="c.Name for c in  countries track by c.Id"><option value="">-- choose --</option></select>
                </div>
                <div class="col-sm-2">
                    <label class="i-checks m-b-none">
                        <input type="checkbox" data-ng-model="DistrictOrState.IsActive"> <i></i>
                    </label>
                </div>
                <div class="col-sm-2">
                    <button type="submit" class="btn btn-default  pull-right">Save</button>
                    <button type="button" data-ng-click="editMode = false;isNew = false; cancel()" class="btn btn-default  pull-right">Cancel</button>

                </div>
            </form>
        </div>
        <div class="row wrapper " ng-repeat="item in pagedItems[currentPage] | orderBy:sortingOrder:reverse" ng-include='getTemplate(item)'></div>
        <footer class="panel-footer">
            <div class="row">
                <div class="col-sm-4 hidden-xs">
                    <small class="text-muted inline m-t-sm m-b-sm">showing {{currentPage*itemsPerPage+1}}-{{currentPage*(itemsPerPage)+itemsPerPage}} of {{items.length}} items</small>
                </div>

                <div class="col-sm-8 text-right text-center-xs">
                    <ul class="pagination pagination-sm m-t-none m-b-none ng-isolate-scope ng-valid">
                        <li ng-class="{disabled: currentPage == 0}">
                            <a href ng-click="prevPage()"><i class="fa fa-chevron-left"></i></a>
                        </li>
                        <li ng-repeat="n in range(pagedItems.length)"
                            ng-class="{active: n == currentPage}"
                            ng-click="setPage()">
                            <a href ng-bind="n + 1">1</a>
                        </li>
                        <li ng-class="{disabled: currentPage == pagedItems.length - 1}">
                            <a href ng-click="nextPage()"><i class="fa fa-chevron-right"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </footer>

    </div>

    <script type="text/ng-template" id="display">

        <div class="col-sm-3">
            <span>{{item.Name}}</span>
        </div>
        <div class="col-sm-3">
            <span data-ng-hide="editMode">{{item.Description}}</span>
        </div>
        <div class="col-sm-2">
            
            <select ng-init="_selected= {Id:item.CountryId}" ng-change="item.CountryId = _selected.Id" ng-disabled="true"  ng-model="_selected" required class="form-control m-b" ng-options="c.Name for c in  countries track by c.Id"><option value="">-- choose --</option></select>
        </div>
        <div class="col-sm-2">
            <i ng-if="item.IsActive==false" class="fa fa-times text-danger text"></i>
            <i ng-if="item.IsActive==true" class="fa fa-check text-success "></i>
        </div>
        <div class="col-sm-2">
            <button type="submit" data-ng-click=" Edit(item)" class="btn btn-default pull-right">Edit</button>
        </div>

    </script>
    <script type="text/ng-template" id="edit">
        <form role="form" class="form-horizontal form-validation" name="DistrictOrStateForm{{$index}}" ng-submit="Update(item)">
            <div class="col-sm-3">
                <input class="form-control" type="text" data-ng-model="item.Name" placeholder="Name" required />
            </div>
            <div class="col-sm-3">
                <input class="form-control" type="text" data-ng-model="item.Description" placeholder="Description"/>
            </div>
            <div class="col-sm-2">
                <select ng-init="_selected= {Id:item.CountryId}"  ng-change="item.CountryId = _selected.Id" ng-model="_selected" required class="form-control m-b" ng-options="c.Name for c in  countries track by c.Id"><option value="">-- choose --</option></select>
            </div>
            <div class="col-sm-2">
                <label class="i-checks m-b-none">
                    <input type="checkbox" data-ng-model="item.IsActive"> <i></i>
                </label>
            </div>
            <div class="col-sm-2">
                <button type="submit" class="btn btn-default pull-right">Save</button>
                <button type="button" data-ng-click=" reset()" class="btn btn-default  pull-right">Cancel</button>
            </div>
        </form>
    </script>
</div>

