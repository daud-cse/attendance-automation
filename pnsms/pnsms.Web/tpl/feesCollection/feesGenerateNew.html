<div  class="bg-details b-b wrapper-sm text-primary-dker">
    <h1 class="m-n font-thin h3"><i class="icon-calculator "></i> &nbsp; Fees Generate</h1>
</div>
<div class="wrapper-md">
    <toaster-container toaster-options="{'position-class': 'toast-top-right', 'close-button':true}"></toaster-container>
    <progressbar class="progress-striped active" value="100" type="info" ng-show="isLoading">Loading...  </progressbar>

    <div class="panel wrapper" ng-hide="isLoading">
        <div class="m-b">
            <form role="form" name="step1" ng-controller="FeesGenerateNewCtrl" class="form-validation" method="post">
                <tabset class="tab-container" ng-init="steps={step1:true, step2:false, step3:false}">
                    <tab heading="Step 1" active="steps.step1">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Genrate Date:</label>
                                    <div class="col-sm-10">
                                        <div ng-controller="DatepickerDemoCtrl">
                                            <div class="input-group ">
                                                <input type="text" value="{{VmfeesGenerateModel.FeesGenerate.GenerationDate | date:'dd-MMMM-yyyy'}}" class="form-control  m-b" datepicker-popup="{{format}}" ng-model="VmfeesGenerateModel.FeesGenerate.GenerationDate" is-open="opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Due Payment Date:</label>
                                    <div class="col-sm-10">
                                        <div ng-controller="DatepickerDemoCtrl">
                                            <div class="input-group ">
                                                <input type="text" value="{{VmfeesGenerateModel.FeesGenerate.DueDate | date:'dd-MMMM-yyyy'}}" class="form-control  m-b" datepicker-popup="{{format}}" ng-model="VmfeesGenerateModel.FeesGenerate.DueDate" is-open="opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">For The Month:</label>
                                    <div class="col-sm-10">
                                        <select ng-model="VmfeesGenerateModel.FeesGenerate.ForTheMonth" class="form-control m-b" ng-options="c.Key as c.Value for c in Monthes" ng-required="true">
                                            <option value="">Month</option>
                                        </select>
                                        <select ng-model="VmfeesGenerateModel.FeesGenerate.ForTheYear" class="form-control m-b" ng-options="c.Key as c.Value for c in Years" ng-required="true">
                                            <option value="">Year</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Remarks</label>
                                    <div class="col-sm-10">
                                        <textarea ng-model="VmfeesGenerateModel.FeesGenerate.Remarks" class="form-control m-b"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="m-t m-b">
                            <button type="submit" ng-disabled="step1.$invalid" class="btn btn-primary" ng-click="steps.step2=true">Next</button>
                        </div>
                    </tab>
                    <tab heading="Step 2" disabled="step1.$invalid" active="steps.step2">
                        <div class="panel panel-success">
                            <div class="panel-heading font-bold"><b>Fees Generate For:</b></div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                            <label>Branch</label>
                                            <select ng-model="VmfeesGenerateModel.FeesGenerateAcademic.AcademicBranchId" class="form-control m-b ng-pristine ng-invalid ng-invalid-required ng-dirty ng-touched"
                                                    ng-options="c.Key as c.Value for c in VmfeesGenerateModel.FeesGenerateAcademic.AcademicBranchList"></select>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                            <label>Version</label>
                                            <select ng-model="VmfeesGenerateModel.FeesGenerateAcademic.AcademicVerssionId" class="form-control m-b ng-pristine ng-invalid ng-invalid-required ng-dirty ng-touched"
                                                    ng-options="c.Key as c.Value for c in VmfeesGenerateModel.FeesGenerateAcademic.AcademicVerssionList">
                                                <option value="">-- choose Version --</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                            <label>Class</label>
                                            <select ng-model="VmfeesGenerateModel.FeesGenerateAcademic.AcademicClassId" class="form-control m-b ng-pristine ng-invalid ng-invalid-required ng-dirty ng-touched"
                                                    ng-options="c.Key as c.Value for c in VmfeesGenerateModel.FeesGenerateAcademic.AcademicClassList">
                                                <option value="">-- choose Class --</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                            <label>Group</label>
                                            <select ng-model="VmfeesGenerateModel.FeesGenerateAcademic.AcademicGroupId" class="form-control m-b"
                                                    ng-options="c.Key as c.Value for c in VmfeesGenerateModel.FeesGenerateAcademic.AcademicGroupList">
                                                <option value="">-- choose Group --</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-success">
                            <div class="panel-heading font-bold"><b>Set Fees Head Wise:</b></div>
                            <div class="panel-body">
                                <div class="row">
                                    <table class="table table-striped b-t b-light" ng-table>
                                        <thead>
                                            <tr>
                                                <th>Fees Head</th>
                                                <th>Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody ng-show="VmfeesGenerateModel.FeesGenerateHeadList.length">
                                            <tr ng-repeat="x in VmfeesGenerateModel.FeesGenerateHeadList">
                                                <td><label><input type="hidden" value="{{ x.FeesHeadId }}">{{ x.HeadName }}</label></td>
                                                <td><input type="text" data-ng-model="x.Amount"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                                <div class="m-t m-b">
                                    <button type="button" class="btn btn-default" ng-click="steps.step1=true">Back</button>
                                    <button type="submit" ng-disabled="!VmfeesGenerateModel.FeesGenerateAcademic.AcademicClassId || !VmfeesGenerateModel.FeesGenerateAcademic.AcademicVerssionId" class="btn btn-primary" ng-click="steps.step3=true; LoadStudents()">Next</button>
                                </div>
                    </tab>
                    <tab heading="Step 3" disabled="step3.$invalid" active="steps.step3">
                        <div class="panel panel-default">
                            <div class="panel-heading font-bold">
                                Students Search For Adjustment
                            </div>
                            <div class="panel-body">
                                <div class="col-sm-4 form-group">
                                    <div angucomplete-alt id="ex8"
                                         placeholder="Search Students"
                                         pause="100"
                                         selected-object="SelectedStudent"
                                         local-data="studentList"
                                         search-fields="Text"
                                         title-field="Text"
                                         minlength="3"
                                         input-class="form-control form-control-small"
                                         match-class="highlight"
                                         ng-model="student.originalObject"
                                         clear-selected="true"
                                         ng-keyup="Load(1)">
                                    </div>
                                    <h4 ng-hide="!student.originalObject.Text">Selected Student: <b>{{student.originalObject.Text}}</b></h4>
                                </div>
                                <div class="col-sm-4 form-group">
                                    <select ng-model="student.FeesHeadId" class="form-control m-b"
                                            ng-options="c.Key as c.Value for c in VmfeesGenerateModel.FeesHeadList">
                                        <option value="">-- choose Fees Head --</option>
                                    </select>
                                </div>
                                <div class="col-sm-3 form-group">
                                    <input type="text" placeholder="Amount" ng-model="student.Amount" class="form-control">
                                </div>
                                <button type="submit" ng-disabled="!student.FeesHeadId || !student.Amount" class="btn btn-default" ng-click="addItem()">Add</button>
                            </div>
                        </div>
                        <div class="panel-body panel-default">
                                <div class="row">
                                    <table class="table table-striped b-t b-light">
                                        <thead>
                                            <tr>
                                                <th>Student Name & Pin</th>
                                                <th>Fees Head</th>
                                                <th>Amount</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="item in items" class="ng-scope">
                                                <td class="ng-binding">{{item.Name}} </td>
                                                <td class="ng-binding">{{item.HeadName}}</td>
                                                <td class="ng-binding">{{item.Amount}}</td>
                                                <td>
                                                    <a title="Delete" tooltips="Delete" ng-click="removeStudent($index)"><i class="fa fa-times text-danger "></i></a> &nbsp;&nbsp;
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        <div class="m-t m-b">
                            <button type="button" class="btn btn-default" ng-click="steps.step2=true">Back</button>
                            <button type="submit" class="btn btn-success" ng-click="AddFeesGenerate()">Submit</button>
                        </div>

                    </tab>
                </tabset>
                
            </form>
        </div>
    </div>
</div>