<div class="bg-light lter b-b wrapper-md">
    <h1 class="m-n font-thin h3">Exam</h1>
</div>

<div class="wrapper-md" ng-controller="ExamCtrl">
    <!-- toaster directive -->
    <toaster-container toaster-options="{'position-class': 'toast-top-right', 'close-button':true}"></toaster-container>
    <!-- / toaster directive -->
    <progressbar class="progress-striped active" value="100" type="info" ng-show="isprogressbar">Loading...  </progressbar>
    <!--{{Exam}}-->
    <div class="panel panel-default" ng-show="isNew">
        <div class="panel-heading">
            <span class="h4">New</span>
        </div>
        <form name="newform" class="form-validation">
            <div class="col-sm-12">
                <div class="row">
                    <div class="col-sm-6 form-group">
                        <label>Branch</label>
                        <select ng-model="Exam.AcademicBranchId" class="form-control m-b" required ng-options="c.Key as c.Value for c in NewExam.AcademicBranchList">
                            <option value="">-- Select Branch --</option>
                        </select>
                    </div>
                    <div class="col-sm-6 form-group">
                        <label>Class</label>
                        <select ng-model="Exam.AcademicClassesId" class="form-control m-b" required data-ng-change="getScetionClasswise()" ng-options="c.Key as c.Value for c in NewExam.AcademicClassList">
                            <option value="">-- Select Class --</option>
                        </select>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6 form-group">
                        <label>Section</label>
                        <select ng-model="Exam.AcademicClassesSectionMapId" class="form-control m-b" required ng-options="c.Key as c.Value for c in NewExam.AcademicSectionList">
                            <option value="">-- Select Section --</option>
                        </select>
                    </div>
                    <div class="col-sm-6 form-group">
                        <label>Exam Type</label>
                        <select ng-model="Exam.ExamTypeId" class="form-control m-b" required ng-options="c.Key as c.Value for c in NewExam.ExamTypeList">
                            <option value="">-- Select Exam Type --</option>
                        </select>
                    </div>
                </div>


                <div class="row">
                    <div class="col-sm-6 form-group">
                        <label>Exam Start Date</label>
                        <div ng-controller="DatepickerDemoCtrl">
                            <div class="input-group ">
                                <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="Exam.ExamDateFrom" required is-open="opened" placeholder="Date From" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
                            </div>
                        </div>

                    </div>
                    <div class="col-sm-6 form-group">
                        <label>Exam End Date</label>
                        <div ng-controller="DatepickerDemoCtrl">
                            <div class="input-group ">
                                <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="Exam.ExamDateTo" required is-open="opened" placeholder="Date To" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="col-sm-6 form-group">
                        <label>Exam Title</label>
                        <input class="form-control" data-ng-model="Exam.Name" required placeholder="Exam Title" type="text">
                    </div>
                    <div class="col-sm-6 form-group">
                        <label>Exam Time</label>
                        <input class="form-control" data-ng-model="Exam.ExamTime" required placeholder="Exam Time" type="text">
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-4 form-group">
                        <label>Total Marks </label>
                        <input class="form-control" data-ng-model="Exam.TotalMarks" valid-number required placeholder="Total Marks" type="text">
                    </div>
                    <div class="col-sm-4 form-group">
                        <label>Pass Marks </label>
                        <input class="form-control" data-ng-model="Exam.PassMarks" valid-number required placeholder="Pass Marks" type="text">
                    </div>
                    <div class="col-sm-4 form-group">
                        <label>Accetp Marks Percentage </label>
                        <input class="form-control" data-ng-model="Exam.AcceptMarks" valid-number required placeholder="Accept Marks" type="text">
                    </div>
                </div>

                <div class="form-group">
                    <label class="i-checks m-b-none">
                        <input type="checkbox" data-ng-model="Exam.IsActive"> <i></i>
                    </label>
                    <label>Is Active  </label>
                </div>
            </div>

            <footer class="panel-footer text-left bg-light lter">
                <button type="submit" class="btn btn-success" ng-click="Save(Exam)" ng-disabled="newform.$invalid">Submit</button>
                <button type="button" data-ng-click="isNew=false;isLoading=true" class="btn btn-info">cancel</button>
            </footer>
        </form>
    </div>

    <div class="panel panel-default" ng-show="isEdit">
        <div class="panel-heading">
            <span class="h4">Edit</span>
        </div>
        <form name="editForm" class="form-validation" ng-submit="Update(selected)">
            <div class="col-sm-12">
                <input class="form-control" ng-hide="true" data-ng-model="selected.Id" required placeholder="Time" type="text">

                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-sm-6 form-group">
                            <label>Branch</label>
                            <select ng-model="selected.AcademicBranchId" class="form-control m-b" required ng-options="c.Key as c.Value for c in NewExam.AcademicBranchList">
                                <option value="">-- Select Branch --</option>
                            </select>
                        </div>
                        <div class="col-sm-6 form-group">
                            <label>Class</label>
                            <select ng-model="selected.AcademicClassesId" class="form-control m-b" data-ng-change="getScetionClasswiseSelected()" required ng-options="c.Key as c.Value for c in NewExam.AcademicClassList">
                                <option value="">-- Select Class --</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-6 form-group">
                            <label>Section</label>
                            <select ng-model="selected.AcademicClassesSectionMapId" class="form-control m-b"  required ng-options="c.Key as c.Value for c in NewExam.AcademicSectionList">
                                <option value="">-- Select Section --</option>
                            </select>
                        </div>
                        <div class="col-sm-6 form-group">
                            <label>Exam Type</label>
                            <select ng-model="selected.ExamTypeId" class="form-control m-b" required ng-options="c.Key as c.Value for c in NewExam.ExamTypeList">
                                <option value="">-- Select Exam Type --</option>
                            </select>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-sm-6 form-group">
                            <label>Exam Start Date</label>
                            <div ng-controller="DatepickerDemoCtrl">
                                <div class="input-group ">
                                    <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="selected.ExamDateFrom" required is-open="opened" placeholder="Date From" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                    </span>
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-6 form-group">
                            <label>Exam End Date</label>
                            <div ng-controller="DatepickerDemoCtrl">
                                <div class="input-group ">
                                    <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="selected.ExamDateTo" required is-open="opened" placeholder="Date To" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-sm-6 form-group">
                            <label>Exam Title</label>
                            <input class="form-control" data-ng-model="selected.Name" required placeholder="Name" type="text">
                        </div>
                        <div class="col-sm-6 form-group">
                            <label>Exam Time</label>
                            <input class="form-control" data-ng-model="selected.ExamTime" required placeholder="Time" type="text">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-4 form-group">
                            <label>Total Marks </label>
                            <input class="form-control" data-ng-model="selected.TotalMarks" valid-number required placeholder="Total Marks" type="text">
                        </div>
                        <div class="col-sm-4 form-group">
                            <label>Pass Marks </label>
                            <input class="form-control" data-ng-model="selected.PassMarks" valid-number required placeholder="Pass Marks" type="text">
                        </div>
                        <div class="col-sm-4 form-group">
                            <label>Accetp Marks Percentage </label>
                            <input class="form-control" data-ng-model="selected.AcceptMarks" valid-number required placeholder="Accept Marks" type="text">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="i-checks m-b-none">
                            <input type="checkbox" data-ng-model="selected.IsActive"> <i></i>
                        </label>
                        <label>Is Active  </label>
                    </div>
                </div>
            </div>
            <footer class="panel-footer text-left bg-light lter">
                <button type="submit" class="btn btn-success" ng-disabled="editForm.$invalid">Submit</button>
                <button type="button" data-ng-click="cancel(selected)" class="btn btn-info">cancel</button>
            </footer>
        </form>
    </div>



    <div class="panel panel-default" ng-show="isLoading && !isprogressbar">

        <div class="row wrapper">
            <div class="col-sm-3 m-b-xs">

                <button ng-click="New()" class="btn btn-sm btn-info"><i class="fa fa-plus fa-fw m-r-xs"></i>  ADD NEW</button>
            </div>
            <div class="col-sm-3">
            </div>
            <div class="col-sm-6">
                <div class="input-group">
                    <input type="text" class="input-sm form-control" ng-change="search()" ng-model="query" placeholder=" search">
                    <span class="input-group-btn">
                        <button class="btn btn-sm btn-default" type="button"><i class="glyphicon glyphicon-search"></i></button>
                    </span>
                </div>
            </div>
        </div>

        <!--Data-->
        <table class="table table-striped b-t b-light">
            <thead>
                <tr>
                    <th style="width:20px;">

                    </th>


                    <th><span class="">Exam Type Name&nbsp;<a ng-click="sort_by('ExamTypeName')"><i class="fa fa-sort"></i></a> </span></th>
                    <th><span class="Name">Exam Name&nbsp;<a ng-click="sort_by('Name')"><i class="fa fa-sort"></i></a> </span></th>
                    <th><span class="">From Date&nbsp; <a ng-click="sort_by('ExamDateFrom')"><i class="fa fa-sort"></i></a> </span></th>
                    <th><span class="">To Date&nbsp; <a ng-click="sort_by('ExamDateTo')"><i class="fa fa-sort"></i></a> </span></th>
                    <th><span class="">Time&nbsp;<a ng-click="sort_by('ExamTime')"><i class="fa fa-sort"></i></a></span></th>
                    <th><span class="">Total&nbsp;<a ng-click="sort_by('TotalMarks')"><i class="fa fa-sort"></i></a></span></th>
                    <th><span class="">Highest&nbsp;<a ng-click="sort_by('HighestMarks')"><i class="fa fa-sort"></i></a></span></th>
                    <th><span class="">Pass&nbsp;<a ng-click="sort_by('PassMarks')"><i class="fa fa-sort"></i></a></span></th>
                    <th><span class="">Accept&nbsp;<a ng-click="sort_by('AcceptMarks')"><i class="fa fa-sort"></i></a></span></th>
                    <th><span class="IsActive">Status &nbsp;<a ng-click="sort_by('IsActive')"><i class="fa fa-sort"></i></a></span></th>

                    <th style="width:100px;"></th>
                </tr>
            </thead>

            <tbody>
                <!--<tr ng-show="isNew">
                    <td></td>

                    <td><input class="form-control" type="text" data-ng-model="Exam.ExamType.Name" placeholder="Exam Type Name" /></td>
                    <td>
                        <form name="form" class="form-validation">
                            <input class="form-control" data-ng-model="Exam.Name" required placeholder="Name" type="text">
                        </form>
                    </td>
                    <td><input class="form-control" type="text" data-ng-model="Exam.ExamDateFrom" placeholder="Exam DateFrom" /></td>
                    <td><input class="form-control" type="text" data-ng-model="Exam.ExamDateTo" placeholder="Exam DateTo" /></td>
                    <td><input class="form-control" type="text" data-ng-model="Exam.ExamTime" placeholder="Exam Time" /></td>
                    <td><input class="form-control" type="text" data-ng-model="Exam.TotalMarks" placeholder="Total Marks" /></td>
                    <td><input class="form-control" type="text" data-ng-model="Exam.HighestMarks" placeholder="Highest Marks" /></td>
                    <td><input class="form-control" type="text" data-ng-model="Exam.PassMarks" placeholder="PassMarks" /></td>
                    <td><input class="form-control" type="text" data-ng-model="Exam.AcceptMarks" placeholder="Accept Marks" /></td>
                    <td>
                        <label class="i-checks m-b-none">
                            <input type="checkbox" data-ng-model="Exam.IsActive"> <i></i>
                        </label>
                    </td>
                    <td>
                        <div class="pull-right">
                            <button type="submit" class="btn-link text-primary" ng-disabled="form.$invalid" ng-click="Add(Exam)"><i class="glyphicon glyphicon-floppy-saved"></i></button>
                            &nbsp;&nbsp;
                            <a type="button" data-ng-click="editMode = false;isNew = false; cancel()" class=" text-info "><i class="fa fa-mail-reply"></i></a>
                        </div>
                    </td>
                </tr>-->
                <tr ng-repeat="item in pagedItems[currentPage] | orderBy:sortingOrder:reverse" ng-include='getTemplate(item)'></tr>
            </tbody>
        </table>
        <footer class="panel-footer">
            <div class="row">
                <div class="col-sm-4 hidden-xs">
                    <small class="text-muted inline m-t-sm m-b-sm">showing {{currentPage*itemsPerPage+1}}-{{(currentPage*(itemsPerPage)+itemsPerPage)>items.length?items.length:(currentPage*(itemsPerPage)+itemsPerPage)}} of {{items.length}} items</small>
                </div>

                <div class="col-sm-8 text-right text-center-xs">
                    <ul class="pagination pagination-sm m-t-none m-b-none ng-isolate-scope ng-valid">
                        <li ng-class="{disabled: currentPage == 0}">
                            <a href ng-click="prevPage()"><i class="fa fa-chevron-left"></i></a>
                        </li>
                        <li ng-repeat="n in range(pagedItems.length)"
                            ng-class="{active: n == currentPage}"
                            ng-click="setPage()">
                            <a href ng-bind="n + 1">1</a>
                        </li>
                        <li ng-class="{disabled: currentPage == pagedItems.length - 1}">
                            <a href ng-click="nextPage()"><i class="fa fa-chevron-right"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </footer>
    </div>


    <script type="text/ng-template" id="display">
        <td></td>
        <td><span>{{item.ExamType.Name}}</span></td>
        <td><span>{{item.Name}}</span></td>
        <td><span>{{item.ExamDateFrom}}</span></td>
        <td><span>{{item.ExamDateTo}}</span></td>
        <td><span>{{item.ExamTime}}</span></td>
        <td><span>{{item.TotalMarks}}</span></td>
        <td><span>{{item.HighestMarks}}</span></td>
        <td><span>{{item.PassMarks}}</span></td>
        <td><span>{{item.AcceptMarks}}</span></td>
        <td>
            <i ng-hide="item.IsActive==true" class="fa fa-times text-danger text" tooltip="InActive" title="InActive"></i>
            <i ng-if="item.IsActive==true" class="fa fa-check text-success" tooltip="Active" title="Active"></i>
        </td>
        <td>
            <a type="submit" data-ng-click="Edit(item)" tooltip="Edit" class="text-primary pull-right"><i class="fa fa-pencil "></i></a>
        </td>

    </script>
    <script type="text/ng-template" id="edit">

        <td></td>
        <td class="form-validation" ng-class="{'ng-invalid-required': item.Name==null || item.Name==''}">

            <input class="form-control" type="text" data-ng-model="item.Name" placeholder="Name" required />

        </td>
        <td><input class="form-control" type="text" data-ng-model="item.ExamDateFrom" placeholder="ExamDateFrom" required /></td>
        <td><input class="form-control" type="text" data-ng-model="item.ExamDateTo" placeholder="ExamDateTo" required /></td>
        <td><input class="form-control" type="text" data-ng-model="item.ExamTime" placeholder="ExamTime" required /></td>
        <td><input class="form-control" type="text" data-ng-model="item.TotalMarks" placeholder="TotalMarks" required /></td>
        <td><input class="form-control" type="text" data-ng-model="item.HighestMarks" placeholder="HighestMarks" required /></td>
        <td><input class="form-control" type="text" data-ng-model="item.PassMarks" placeholder="PassMarks" required /></td>
        <td><input class="form-control" type="text" data-ng-model="item.AcceptMarks" placeholder="AcceptMarks" required /></td>
        <td>
            <label class="i-checks m-b-none">
                <input type="checkbox" data-ng-model="item.IsActive"> <i></i>
            </label>
        </td>
        <td>

            <div class="pull-right">
                <button ng-disabled='item.Name==null  || item.Name==""' tooltip="Save" class="btn btn-link" data-ng-click="Update(item)"><i class="glyphicon glyphicon-floppy-saved"></i></button>
                &nbsp;&nbsp;
                <a data-ng-click="reset()" class="text-info   " tooltip="Back"><i class="fa fa-mail-reply"></i></a>
            </div>
        </td>
    </script>
</div>

